---
name: Issue 14 - Name Generator
about: Генератор уникальных имён для гладиаторов
title: "[ISSUE #14] Name Generator: детерминированная генерация уникальных имён"
labels: ["feature", "backend"]
---

## Цель
Реализовать детерминированный генератор уникальных имён для гладиаторов:
- Имя = `prefix + cognomen`
- Уникальность до исчерпания пула комбинаций
- Детерминизм по seed (одинаковая последовательность при одном seed)

## Контекст
Текущий генератор в `LudusState.HireRandomGladiator()` использует упрощённую схему `prefix + " #" + count`, что не даёт разнообразия имён и не использует seed для генерации имени.

Требуется:
- Использовать списки `prefixes` и `cognomens` (например, исторические римские имена)
- Построить все возможные комбинации `prefix × cognomen`
- Выдавать имена без повторов, используя seed-based RNG
- Обеспечить детерминизм и возможность воспроизведения

## План
- [ ] Добавить интерфейс `INameGenerator` в `src/Ludus.Core`
- [ ] Реализовать `NameGenerator` с валидацией входных данных
- [ ] Построить детерминированный пул комбинаций
- [ ] Реализовать выбор без повторов через перемешивание пула
- [ ] Определить поведение при исчерпании пула
- [ ] Написать тесты (детерминизм, уникальность, валидация, исчерпание)
- [ ] Добавить stability-test (snapshot)
- [ ] Обновить документацию
- [ ] Протестировать и слить в main

## Acceptance Criteria
- [ ] **AC1**: Генерация имени = `prefix + cognomen` (строки объединяются без пробелов или с пробелом по соглашению)
- [ ] **AC2**: Уникальность — каждое имя выдаётся максимум один раз до исчерпания пула
- [ ] **AC3**: Детерминизм — одинаковый seed + одинаковые списки → одинаковая последовательность имён
- [ ] **AC4**: Валидация входа — списки не пустые, нет дублей, строки нормализованы (trim, запрет пустых)
- [ ] **AC5**: Поведение на исчерпании — либо доменное исключение, либо `false` у `TryGenerate()`
- [ ] **AC6**: Тесты: детерминизм, разные seed, нет повторов, исчерпание, валидация
- [ ] **AC7**: Stability-test для фиксации точной последовательности при фиксированном seed

## Затрагиваемые зоны
- `src/Ludus.Core/` — только логика, добавить файлы:
  - `INameGenerator.cs` (интерфейс)
  - `NameGenerator.cs` (реализация)
  - `NameGenerationException.cs` (если нужно доменное исключение)
- `src/Ludus.Tests/` — тесты:
  - `NameGeneratorTests.cs`
- `README.md` или отдельная документация — описание API и ограничений

## Исключения из области
- Godot-слой не трогать (`game/` и `Main.cs`)
- Не встраивать генератор в `HireRandomGladiator()` в этом issue — только API и логику
- Не добавлять в список имена по умолчанию — только структуру
