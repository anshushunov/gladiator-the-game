# AGENTS.md — правила работы кодинг-агента

## Цель
Проект развиваем итерациями. Любое изменение должно быть маленьким, проверяемым и вливаемым через PR.

## Обязательные правила
1) 1 Issue = 1 PR.
2) Каждый PR должен:
   - собираться
   - иметь тесты (если затрагивает `Ludus.Core`)
   - обновлять документацию, если меняет поведение/архитектуру
3) Нельзя смешивать “рефакторинг” и “фичу” в одном PR.
4) Любая логика симуляции/боя живёт в `src/Ludus.Core`, а Godot — только UI/визуал/интеграция.

## Архитектурные принципы
- Детерминизм: симуляция должна быть воспроизводима по seed.
- Event-driven внутри ядра: важные изменения состояния оформляем как события.
- IO/сохранения через интерфейсы (адаптеры в `game/`).

## Definition of Done (DoD)
- Код отформатирован
- Добавлены/обновлены тесты
- Нет “мертвого” кода и TODO без Issue
- В PR описано: что сделано, как проверить

## Ветки/коммиты
- Ветка: `issue/<номер>-<slug>`
- Коммиты: маленькие, осмысленные
- Сообщение PR: включает ссылку на issue и чеклист “как проверить”

## Запрещено
- Коммитить секреты (`.qwen/.env`, ключи, токены)
- Менять структуру проекта без ADR в `docs/adr/`

